<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WIZARD ×©×™×•×•×§ ××•×¦×¨ - × ×©×™× ××•×‘×™×œ×•×ª ××“×¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #333;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 250px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23f9d77e" fill-opacity="0.3" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,138.7C960,139,1056,117,1152,101.3C1248,85,1344,75,1392,69.3L1440,64L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path></svg>') no-repeat top center;
            background-size: cover;
            z-index: -1;
        }

        body::after {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 300px;
            background: #7B1E7A;
            z-index: -2;
            clip-path: polygon(0 30%, 100% 0, 100% 100%, 0 100%);
        }

        .logos-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            padding: 20px;
            background: white;
            flex-wrap: wrap;
        }

        .logo-item {
            height: 80px;
            display: flex;
            align-items: center;
        }

        .logo-item img {
            height: 100%;
            width: auto;
            object-fit: contain;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #7B1E7A;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            color: #666;
        }

        .decorative-icons {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .icon {
            position: absolute;
            font-size: 20px;
            opacity: 0.6;
        }

        .step-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .step-container.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-title {
            color: #7B1E7A;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 3px solid #7B1E7A;
            padding-bottom: 15px;
        }

        .key-points {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .key-point {
            background: linear-gradient(135deg, #f9d77e, #ffeaa7);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .key-point h3 {
            color: #2d3436;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
            font-size: 1.1em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #7B1E7A;
        }

        .sentence-builder {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #7B1E7A;
        }

        .sentence-builder h3 {
            color: #7B1E7A;
            margin-bottom: 15px;
        }

        .sentence-parts {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 1.2em;
        }

        .sentence-input {
            min-width: 150px;
            padding: 8px;
            border: 2px solid #7B1E7A;
            border-radius: 5px;
            background: white;
        }

        .color-picker-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .color-option {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            cursor: pointer;
            border: 4px solid transparent;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.selected {
            border-color: #333;
            transform: scale(1.2);
        }

        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .selection-card {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .selection-card:hover {
            border-color: #7B1E7A;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .selection-card.selected {
            border-color: #7B1E7A;
            background: #f3e5f5;
        }

        .summary-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #7B1E7A;
        }

        .summary-item {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-right: 4px solid #7B1E7A;
        }

        .summary-item strong {
            color: #7B1E7A;
        }

        .btn {
            background: linear-gradient(135deg, #7B1E7A, #9B4D9A);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-download {
            background: linear-gradient(135deg, #00b894, #00a085);
        }

        .btn-print {
            background: linear-gradient(135deg, #e17055, #d63031);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ddd;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #7B1E7A, #f9d77e);
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .tools-section {
            background: linear-gradient(135deg, #7B1E7A, #9B4D9A);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tool-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            cursor: pointer;
        }

        .tool-card h4 {
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .navigation {
            text-align: center;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .key-points {
                grid-template-columns: 1fr;
            }

            .sentence-parts {
                flex-direction: column;
                align-items: stretch;
            }

            .color-picker-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* ===== CLOUD SIDEBAR ===== */
        .cloud-sidebar-btn {
            position: fixed;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(180deg, #5a1058, #7B1E7A, #9B4D9A);
            color: white;
            padding: 22px 14px;
            border-radius: 0 16px 16px 0;
            cursor: pointer;
            z-index: 200;
            box-shadow: 4px 0 20px rgba(90,16,88,0.5), 0 0 0 2px rgba(255,255,255,0.15) inset;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            font-family: 'Segoe UI', sans-serif;
            transition: all 0.3s ease;
            user-select: none;
            min-width: 52px;
        }

        .cloud-sidebar-btn:hover {
            padding-left: 20px;
            min-width: 60px;
            box-shadow: 6px 0 28px rgba(90,16,88,0.65), 0 0 0 2px rgba(255,255,255,0.2) inset;
        }

        .cloud-sidebar-btn .csb-icon {
            font-size: 26px;
            line-height: 1;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .cloud-sidebar-btn .csb-label {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 2px;
            line-height: 1;
        }

        .cloud-sidebar-btn .csb-badge {
            background: #f9d77e;
            color: #5a1058;
            font-size: 10px;
            font-weight: 800;
            padding: 3px 6px;
            border-radius: 8px;
            writing-mode: horizontal-tb;
            transform: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.2);
        }

        .cloud-panel-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            z-index: 300;
            display: none;
            backdrop-filter: blur(2px);
        }

        .cloud-panel-overlay.open { display: block; }

        .cloud-panel {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 400px;
            max-width: 95vw;
            background: white;
            z-index: 400;
            box-shadow: 6px 0 35px rgba(0,0,0,0.25);
            display: flex;
            flex-direction: column;
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
            direction: rtl;
        }

        .cloud-panel.open { transform: translateX(0); }

        .cloud-panel-header {
            background: linear-gradient(135deg, #7B1E7A, #9B4D9A);
            color: white;
            padding: 18px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .cloud-panel-header h2 { font-size: 18px; font-weight: 700; }

        .cloud-panel-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 4px 10px;
            border-radius: 6px;
            line-height: 1;
            transition: background 0.2s;
        }

        .cloud-panel-close:hover { background: rgba(255,255,255,0.35); }

        .cloud-panel-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cloud-section { margin-bottom: 22px; }

        .cloud-section-title {
            font-weight: 700;
            color: #7B1E7A;
            margin-bottom: 8px;
            font-size: 15px;
            border-bottom: 2px solid #f3e5f5;
            padding-bottom: 5px;
        }

        .cloud-select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            direction: rtl;
            background: #fafafa;
            transition: border-color 0.2s;
        }

        .cloud-select:focus { outline: none; border-color: #7B1E7A; background: white; }
        .cloud-select:disabled { opacity: 0.55; cursor: not-allowed; }

        .students-list {
            background: #f9f4f9;
            border: 1px solid #e8d5e8;
            border-radius: 8px;
            padding: 12px;
            min-height: 48px;
            line-height: 1.8;
        }

        .student-tag {
            display: inline-block;
            background: #7B1E7A;
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 13px;
            margin: 2px;
        }

        .upload-area {
            border: 2px dashed #9B4D9A;
            border-radius: 10px;
            padding: 28px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.25s;
            background: #fdf7fd;
        }

        .upload-area:hover, .upload-area.dragover {
            background: #f3e5f5;
            border-color: #7B1E7A;
        }

        .upload-icon { font-size: 36px; margin-bottom: 8px; }

        .upload-area-title { font-weight: 700; color: #7B1E7A; margin-bottom: 4px; }

        .upload-area-sub { font-size: 12px; color: #999; }

        .upload-progress { margin-top: 12px; display: none; }

        .upload-progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .upload-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #7B1E7A, #9B4D9A);
            width: 0%;
            transition: width 0.3s;
            border-radius: 3px;
        }

        .upload-status {
            font-size: 13px;
            margin-top: 6px;
            color: #666;
            text-align: center;
        }

        .qr-section { display: none; text-align: center; }
        .qr-section.visible { display: block; }

        .qr-box {
            background: #fdf7fd;
            border: 2px solid #e8d5e8;
            border-radius: 12px;
            padding: 16px;
        }

        .qr-code-img {
            width: 180px;
            height: 180px;
            border-radius: 8px;
            display: block;
            margin: 0 auto 10px;
        }

        .qr-label {
            font-size: 13px;
            color: #555;
            margin-bottom: 8px;
        }

        .qr-url {
            font-size: 11px;
            color: #999;
            word-break: break-all;
            background: #f5f5f5;
            padding: 6px;
            border-radius: 6px;
            margin-top: 8px;
            text-align: left;
            direction: ltr;
        }

        .btn-cloud {
            background: linear-gradient(135deg, #7B1E7A, #9B4D9A);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
            transition: all 0.2s;
        }

        .btn-cloud:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(123,30,122,0.3);
        }

        .btn-cloud-secondary {
            background: white;
            color: #7B1E7A;
            border: 2px solid #7B1E7A;
        }

        .btn-cloud-secondary:hover {
            background: #f3e5f5;
        }

        .file-queue { margin-top: 12px; display: none; }
        .file-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 7px 10px;
            background: #fdf7fd;
            border: 1px solid #e8d5e8;
            border-radius: 7px;
            margin-bottom: 5px;
        }
        .file-item-icon { font-size: 18px; flex-shrink: 0; }
        .file-item-name {
            flex: 1;
            font-size: 13px;
            color: #444;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .file-item-bar {
            height: 3px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 3px;
        }
        .file-item-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #7B1E7A, #9B4D9A);
            width: 0%;
            transition: width 0.3s;
        }
        .file-item-status { font-size: 14px; flex-shrink: 0; }
    </style>
</head>
<body>
    <div class="logos-container">
        <div class="logo-item">
            <img src="logot.png" alt="×˜×›× ×•×œ×•×’">
        </div>
        <div class="logo-item">
            <img src="logoastra.png" alt="AstraZeneca">
        </div>
        <div class="logo-item">
            <img src="logonashim.png" alt="× ×©×™× ××•×‘×™×œ×•×ª ××“×¢">
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸ’¡ ×©×™×•×•×§ ×”××¦××” ×¨×¤×•××™×ª - × ×©×™× ××•×‘×™×œ×•×ª ××“×¢</h1>
            <p>× ×©×™× ××•×‘×™×œ×•×ª ××“×¢ - ××“×¨×™×š ××™×©×™ ×œ×‘× ×™×™×ª ××¡×˜×¨×˜×’×™×” ×©×™×•×•×§×™×ª ×œ×”××¦××” ×¨×¤×•××™×ª</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- ×©×œ×‘ 1: ×¢×§×¨×•× ×•×ª ××¨×›×–×™×™× -->
        <div class="step-container active" id="step1">
            <div class="step-title">ğŸ¯ ×¢×§×¨×•× ×•×ª ××¨×›×–×™×™× ×œ×¤×¨×¡×•××ª ×× ×¦×—×ª</div>
            <div class="key-points">
                <div class="key-point">
                    <h3>ğŸ¯ ×”××˜×¨×”</h3>
                    <p>×œ×™×¦×•×¨ ×¤×¨×¡×•××ª ×©×’×•×¨××ª ×œ×× ×©×™× ×œ×¨×¦×•×ª ××ª ×”××•×¦×¨ ×©×œ×›×!</p>
                </div>
                <div class="key-point">
                    <h3>â­ ××™×›×•×ª</h3>
                    <p>×”×ª×•×¦×¨ ×¦×¨×™×š ×œ×”×™×•×ª ××§×¦×•×¢×™ - ××©×”×• ×©×ª×•×›×œ×• ×œ×”×ª×’××•×ª ×‘×• ×•×œ×”×¦×™×’ ×œ×©×•×¤×˜×™×</p>
                </div>
            </div>
            <div class="navigation">
                <button class="btn" onclick="nextStep()">×‘×•××• × ×ª×—×™×œ! ğŸš€</button>
            </div>
        </div>

        <!-- ×©×œ×‘ 2: ××™ ×”×œ×§×•×— -->
        <div class="step-container" id="step2">
            <div class="step-title">ğŸ‘¥ ××™ ×”×œ×§×•×— ×©×œ×›×?</div>
            
            <p style="background: #f3e5f5; padding: 15px; border-radius: 8px; margin-bottom: 20px; color: #333; border-right: 4px solid #7B1E7A;">
                ğŸ’¡ <strong>×–×›×¨×•:</strong> ×‘×¢×™×” ×¨×¤×•××™×ª ×™×›×•×œ×” ×œ×”×©×¤×™×¢ ×¢×œ ×—×•×œ×™×, ×¨×•×¤××™×, ×‘×ª×™ ×—×•×œ×™×, ×§×•×¤×•×ª ×—×•×œ×™× ×•××¤×™×œ×• ××©×¤×—×•×ª...
            </p>
            
            <div class="form-group">
                <label>××™ ×”×œ×§×•×— ×©×œ×›×?</label>
                <select id="customerType">
                    <option value="">×‘×—×¨×• ×¡×•×’ ×œ×§×•×—...</option>
                    <option value="×—×•×œ×™×">×—×•×œ×™× ×•××˜×•×¤×œ×™×</option>
                    <option value="×¨×•×¤××™×">×¨×•×¤××™× ×•×× ×©×™ ×¦×•×•×ª ×¨×¤×•××™</option>
                    <option value="×‘×ª×™ ×—×•×œ×™×">×‘×ª×™ ×—×•×œ×™× ×•××¨×¤××•×ª</option>
                    <option value="×§×•×¤×•×ª ×—×•×œ×™×">×§×•×¤×•×ª ×—×•×œ×™×</option>
                    <option value="××©×¤×—×•×ª">××©×¤×—×•×ª ×©×œ ×—×•×œ×™×</option>
                    <option value="××©×¨×“ ×”×‘×¨×™××•×ª">××©×¨×“ ×”×‘×¨×™××•×ª ×•×¨×©×•×™×•×ª</option>
                    <option value="××—×¨">××—×¨, × ××§×• ×œ××˜×”</option>
                </select>
            </div>

            <div class="form-group">
                <label>××” ×”×‘×¢×™×” ×”×›×™ ×’×“×•×œ×” ×©×œ ×”×œ×§×•×—?</label>
                <textarea id="customerProblem" rows="3" placeholder="×œ××©×œ: ×›××‘×™×, ×§×•×©×™ ×‘××‘×—×•×Ÿ, ×–××Ÿ ×××•×©×š ×œ×˜×™×¤×•×œ, ×˜×¢×•×™×•×ª ×¨×¤×•××™×•×ª, ×¢×œ×•×™×•×ª ×’×‘×•×”×•×ª..."></textarea>
            </div>

            <div class="sentence-builder">
                <h3>ğŸ”§ ×‘×•××• × ×‘× ×” ××ª ×”××©×¤×˜ ×©×œ×›×:</h3>
                <div class="sentence-parts">
                    <span>×”×œ×§×•×— ×©×œ× ×• ×”×•×</span>
                    <input type="text" class="sentence-input" id="customer1" placeholder="××™?">
                    <span>×©××ª××•×“×“ ×¢×</span>
                    <input type="text" class="sentence-input" id="customer2" placeholder="××™×–×• ×‘×¢×™×”?">
                </div>
                <div id="customerSentence" style="margin-top: 15px; font-weight: bold; color: #7B1E7A; font-size: 1.2em;"></div>
                <div style="margin-top: 10px; font-size: 0.9em; color: #888; font-style: italic;">
                    ğŸ’¡ ×œ×“×•×’××: ×”×œ×§×•×—×•×ª ×©×œ× ×• ×”× ×—×•×œ×™ ×¡×•×›×¨×ª ×©××ª××•×“×“×™× ×¢× ×§×•×©×™ ×‘××¢×§×‘ ×™×•××™×•××™ ××—×¨ ×¨××•×ª ×”×¡×•×›×¨ ×•×”×ª×××ª ×”×˜×™×¤×•×œ
                </div>
            </div>

            <div class="navigation">
                <button class="btn" onclick="prevStep()">×—×–×•×¨</button>
                <button class="btn" onclick="nextStep()">×”××©×š ×œ××¡×¨ ×”×©×™×•×•×§×™ ğŸ“¢</button>
            </div>
        </div>

        <!-- ×©×œ×‘ 3: ×”××¡×¨ ×”×©×™×•×•×§×™ -->
        <div class="step-container" id="step3">
            <div class="step-title">ğŸ“¢ ×‘×•××• × ×‘× ×” ××ª ×”××¡×¨ ×”×©×™×•×•×§×™</div>
            
            <div class="form-group">
                <label>××™×š ×”××•×¦×¨ ×©×œ×›× ×¤×•×ª×¨ ××ª ×”×‘×¢×™×” ×©×œ ×”×œ×§×•×—?</label>
                <textarea id="solution" rows="3" placeholder="×ª××¨×• ×‘×§×¦×¨×” ××™×š ×”××•×¦×¨ ×©×œ×›× ×¢×•×–×¨..."></textarea>
            </div>

            <div class="form-group">
                <label>×©× ×”××•×¦×¨:</label>
                <input type="text" id="productName" placeholder="××™×š ×ª×§×¨××• ×œ××•×¦×¨ ×©×œ×›×?">
                <small style="color: #666;">ğŸ’¡ ×˜×™×¤: ×‘×—×¨×• ×©× ×§×œ ×œ×”×’×™×™×” ×•×©×™×”×™×” ×§×œ ×œ×–×›×•×¨ ××•×ª×•</small>
            </div>

            <div class="form-group">
                <label>×¡×™×¡××” (Slogan):</label>
                <input type="text" id="slogan" placeholder="××©×¤×˜ ×§×¦×¨ ×©× ×ª×§×¢ ×‘×¨××©...">
                <small style="color: #666;">ğŸ’¡ ×˜×™×¤: ×¦×¨×™×š ×œ×”×™×•×ª ×§×œ×™×˜ ×•×§×¦×¨, ×›××• ×©×™×¨ ×©"× ×ª×§×¢" ×‘×¨××©</small>
            </div>

            <div class="form-group">
                <label>×‘×—×¨×• ×¦×‘×¢ ×¢×™×¦×•×‘:</label>
                <div class="color-picker-container">
                    <div class="color-option" style="background: #e74c3c;" data-color="#e74c3c" onclick="selectColor(this)">××“×•×</div>
                    <div class="color-option" style="background: #3498db;" data-color="#3498db" onclick="selectColor(this)">×›×—×•×œ</div>
                    <div class="color-option" style="background: #2ecc71;" data-color="#2ecc71" onclick="selectColor(this)">×™×¨×•×§</div>
                    <div class="color-option" style="background: #f39c12;" data-color="#f39c12" onclick="selectColor(this)">×›×ª×•×</div>
                    <div class="color-option" style="background: #9b59b6;" data-color="#9b59b6" onclick="selectColor(this)">×¡×’×•×œ</div>
                    <div class="color-option" style="background: #1abc9c;" data-color="#1abc9c" onclick="selectColor(this)">×˜×•×¨×§×™×–</div>
                    <div class="color-option" style="background: #e67e22;" data-color="#e67e22" onclick="selectColor(this)">×—×•×</div>
                    <div class="color-option" style="background: #34495e;" data-color="#34495e" onclick="selectColor(this)">××¤×•×¨</div>
                </div>
            </div>

            <div class="navigation">
                <button class="btn" onclick="prevStep()">×—×–×•×¨</button>
                <button class="btn" onclick="nextStep()">×‘×•××• × ×ª×›× ×Ÿ! ğŸ“‹</button>
            </div>
        </div>

        <!-- ×©×œ×‘ 4: ×ª×›× ×•×Ÿ -->
        <div class="step-container" id="step4">
            <div class="step-title">ğŸ“‹ ×‘×•××• × ×ª×›× ×Ÿ ××ª ×”×¤×¨×¡×•××ª</div>
            
            <div class="form-group">
                <label>××™×–×” ×¡×•×’ ×¤×¨×¡×•××ª ××ª× ×¨×•×¦×™× ×œ×™×¦×•×¨? (× ×™×ª×Ÿ ×œ×‘×—×•×¨ ×™×•×ª×¨ ×××—×“)</label>
                <div class="selection-grid">
                    <div class="selection-card" data-type="×©×™×¨" onclick="selectMultipleAdType(this)">
                        <h4>ğŸµ ×©×™×¨ ×¤×¨×¡×•××™</h4>
                        <p>×©×™×¨ ××§×•×¨×™ ×©×™×–×›×™×¨ ××ª ×”××•×¦×¨</p>
                    </div>
                    <div class="selection-card" data-type="×›×¨×–×”" onclick="selectMultipleAdType(this)">
                        <h4>ğŸ¨ ×›×¨×–×” ×¢×™×¦×•×‘×™×ª</h4>
                        <p>×¤×•×¡×˜×¨ ×•×™×–×•××œ×™ ××¨×©×™×</p>
                    </div>
                    <div class="selection-card" data-type="×¡×¨×˜×•×Ÿ" onclick="selectMultipleAdType(this)">
                        <h4>ğŸ¬ ×¡×¨×˜×•×Ÿ ×¤×¨×¡×•××ª</h4>
                        <p>×¡×¨×˜×•×Ÿ ×§×¦×¨ ×•××©×›× ×¢</p>
                    </div>
                    <div class="selection-card" data-type="×œ×•×’×• ×•×—×•×‘×¨×ª" onclick="selectMultipleAdType(this)">
                        <h4>ğŸ“„ ×œ×•×’×• ×•×—×•×‘×¨×ª</h4>
                        <p>×–×”×•×ª ×•×™×–×•××œ×™×ª ××§×¦×•×¢×™×ª</p>
                    </div>
                    <div class="selection-card" data-type="××—×¨" onclick="selectMultipleAdType(this)">
                        <h4>ğŸ’¡ ×¨×¢×™×•×Ÿ ××—×¨</h4>
                        <p>××©×”×• ×™×¦×™×¨×ª×™ ×•××§×•×¨×™</p>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>××” ×”××¡×¨ ×”××¨×›×–×™? (×‘××©×¤×˜ ××—×“)</label>
                <input type="text" id="mainMessage" placeholder="×”××¡×¨ ×”×›×™ ×—×©×•×‘ ×©××ª× ×¨×•×¦×™× ×œ×”×¢×‘×™×¨...">
            </div>

            <div class="form-group">
                <label>××™×–×” ×›×œ×™× ×ª×©×ª××©×•? (× ×™×ª×Ÿ ×œ×‘×—×•×¨ ×™×•×ª×¨ ×××—×“)</label>
                <div class="selection-grid">
                    <div class="selection-card" data-tool="SUNO" onclick="selectMultipleTool(this)">
                        <h4>ğŸµ SUNO</h4>
                        <p>×™×¦×™×¨×ª ×©×™×¨×™× ××˜×§×¡×˜</p>
                    </div>
                    <div class="selection-card" data-tool="Leonardo AI" onclick="selectMultipleTool(this)">
                        <h4>ğŸ¨ Leonardo AI</h4>
                        <p>×™×¦×™×¨×ª ×ª××•× ×•×ª ××˜×§×¡×˜</p>
                    </div>
                    <div class="selection-card" data-tool="Napkin AI" onclick="selectMultipleTool(this)">
                        <h4>ğŸ“Š Napkin AI</h4>
                        <p>×™×™×¦×•×’×™× ×•×™×–×•××œ×™×™×</p>
                    </div>
                    <div class="selection-card" data-tool="Canva" onclick="selectMultipleTool(this)">
                        <h4>ğŸ–¼ï¸ Canva</h4>
                        <p>×¢×™×¦×•×‘ ×›×¨×–×•×ª ×•×¤×•×¡×˜×¨×™×</p>
                    </div>
                    <div class="selection-card" data-tool="×™×•×¦×¨ ×œ×•×’×•" onclick="selectMultipleTool(this)">
                        <h4>ğŸ·ï¸ ×™×•×¦×¨ ×œ×•×’×•</h4>
                        <p>×œ×•×’×•××™× ××§×¦×•×¢×™×™×</p>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>××™×š ×–×” ×™×™×¨××”? (×¡×§×™×¦×” ××”×™×¨×” ×‘××™×œ×™×)</label>
                <textarea id="visualDescription" rows="3" placeholder="×ª××¨×• ××™×š ×”×¤×¨×¡×•××ª ×ª×™×¨××”..."></textarea>
            </div>

            <div class="navigation">
                <button class="btn" onclick="prevStep()">×—×–×•×¨</button>
                <button class="btn" onclick="nextStep()">×‘×•××• × ×¡×›×! ğŸ“</button>
            </div>
        </div>

        <!-- ×©×œ×‘ 5: ×¡×™×›×•× -->
        <div class="step-container" id="step5">
            <div class="step-title">ğŸ“ ×¡×™×›×•× ×”××¡×˜×¨×˜×’×™×” ×”×©×™×•×•×§×™×ª ×©×œ×›×</div>
            
            <div class="summary-section" id="summaryContent">
                <!-- ×”×ª×•×›×Ÿ ×™×ª××œ× ×‘××•×¤×Ÿ ×“×™× ××™ -->
            </div>

            <div class="navigation">
                <button class="btn btn-download" onclick="downloadAndPrintSummary()">ğŸ“‹ ×”×•×¨×™×“×• ×¡×™×›×•× ×•×§×¨××• ×œ××“×¨×™×š/×” ×©×™×“×¤×™×¡ ×œ×›×</button>
                <div style="margin-top: 10px;">
                    <button class="btn" onclick="nextStep()">×”××©×™×›×• ×œ×›×œ×™ ×”×¢×‘×•×“×”! ğŸ› ï¸</button>
                </div>
            </div>
        </div>

        <!-- ×©×œ×‘ 6: ×›×œ×™ ×¢×‘×•×“×” -->
        <div class="step-container" id="step6">
            <div class="tools-section">
                <h2>ğŸ› ï¸ ×”×›×¨×ª ×”×›×œ×™× ×•×”× ×—×™×•×ª ×˜×›× ×™×•×ª</h2>
                <h3>â° ×–×” ×”×–××Ÿ ×©×œ×›× ×œ×”×ª×—×™×œ ×‘××œ××›×”!</h3>
                
                <p style="margin: 20px 0; font-size: 1.2em;">
                    <strong>×”×–××Ÿ ×©×œ×›×:</strong> 45 ×“×§×•×ª ×œ×™×¦×™×¨×ª ×¤×¨×¡×•××ª ××§×¦×•×¢×™×ª!
                </p>

                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h4>ğŸ“¹ ×¡×¨×˜×•×Ÿ ×”×“×¨×›×” ×¢×œ ×”×¤×œ×˜×¤×•×¨××•×ª:</h4>
                    <p>×œ×—×¦×• ×¢×œ ×”×§×™×©×•×¨ ×œ×¦×¤×™×™×” ×‘×”×“×¨×›×” ×”××œ××”:</p>
                    <a href="https://drive.google.com/file/d/1aGTZxDZYltW87RioRR0oyjo9wO9FgrGh/view?usp=sharing" 
                       target="_blank" style="color: #ffeaa7; text-decoration: underline; font-weight: bold;">
                       ğŸ¬ ×¦×¤×• ×‘×¡×¨×˜×•×Ÿ ×”×”×“×¨×›×” ×›××Ÿ
                    </a>
                </div>

                <div class="tools-grid">
                    <div class="tool-card" onclick="window.open('https://suno.com', '_blank')">
                        <h4>ğŸµ SUNO</h4>
                        <p>×™×¦×™×¨×ª ×©×™×¨×™× ××˜×§×¡×˜ ×‘×¢×‘×¨×™×ª - ××•×©×œ× ×œ×¤×¨×¡×•××•×ª ××•×–×™×§×œ×™×•×ª</p>
                    </div>
                    <div class="tool-card" onclick="window.open('https://app.leonardo.ai/', '_blank')">
                        <h4>ğŸ¨ Leonardo AI / Pixlr</h4>
                        <p>×™×¦×™×¨×ª ×ª××•× ×•×ª ××˜×§×¡×˜ ×•×”×•×¡×¤×ª ×¢×™×¦×•×‘×™× ××§×¦×•×¢×™×™×</p>
                    </div>
                    <div class="tool-card" onclick="window.open('https://www.napkin.ai/', '_blank')">
                        <h4>ğŸ“Š Napkin AI</h4>
                        <p>×™×¦×™×¨×ª ×™×™×¦×•×’×™× ×•×™×–×•××œ×™×™× ×•×ª×¨×©×™××™×</p>
                    </div>
                    <div class="tool-card" onclick="window.open('https://www.design.com/s/logo?var=ai-logo-generator-dcom&code=25OFFSEM&utm_medium=cpc&utm_source=google&utm_campaign=middleeast_generic_logo&utm_adgroup=ai_logos&utm_content=724781087656&utm_keyword=ai+logo+maker&utm_network=g&gad_source=1&gad_campaignid=20838923223&gbraid=0AAAAADwF9LADCHekhV24PncFHIFga8CGL&gclid=Cj0KCQjwxdXBBhDEARIsAAUkP6iNiOuM_AlQ_eCjAiEj8W91pgQN_ft6Ri0EXiqOJUMabet0pGD6FlsaAgyPEALw_wcB', '_blank')">
                        <h4>ğŸ·ï¸ ×™×•×¦×¨ ×œ×•×’×• ××˜×§×¡×˜</h4>
                        <p>×™×¦×™×¨×ª ×œ×•×’×•××™× ××§×¦×•×¢×™×™× ×‘×××¦×¢×•×ª AI</p>
                    </div>
                    <div class="tool-card" onclick="window.open('https://canva.com', '_blank')">
                        <h4>ğŸ–¼ï¸ Canva</h4>
                        <p>×¢×™×¦×•×‘ ×›×¨×–×•×ª ×•×¤×•×¡×˜×¨×™× ×“×¨×š ×”×“×¤×“×¤×Ÿ</p>
                    </div>
                    <div class="tool-card" onclick="window.open('https://workspace.google.com/products/slides/', '_blank')">
                        <h4>ğŸ“„ PowerPoint/Google Slides</h4>
                        <p>××¦×’×•×ª ×•×¢×™×¦×•×‘×™× ×¤×©×•×˜×™× ×•××”×™×¨×™×</p>
                    </div>
                </div>

                <div style="background: rgba(255,0,0,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid #ff6b6b;">
                    <h4>âš ï¸ ×”× ×—×™×” ×—×©×•×‘×”:</h4>
                    <p><strong>×œ×¦×•×¨×š ×”×“×¤×¡×ª ×”×ª×•×¦×¨×™× ×”××“×”×™××™× ×©×œ×›× - ×—×•×‘×” ×œ×©××•×¨ ××ª ×›×œ ×”×ª×•×¦×¨×™× ×‘×›×•× ×Ÿ G ×‘××—×©×‘!</strong></p>
                    <p><strong>×¦×¨×™×›×™× ×¢×–×¨×”? ×¤× ×• ×œ××“×¨×™×š/×”</strong></p>
                </div>

                <div style="background: rgba(0,255,0,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid #00b894;">
                    <h4>ğŸ–¨ï¸ ××¤×©×¨×•×™×•×ª ×”×“×¤×¡×”:</h4>
                    <p>â€¢ × ×™×ª×Ÿ ×œ×”×“×¤×™×¡ ×¢×œ ×‘×¨×™×¡×˜×•×œ/×§××¤×”</p>
                    <p>â€¢ ××•××œ×¥ ×œ×ª×›× ×Ÿ ×‘×’×•×“×œ A4 ××• A3</p>
                </div>

                <div class="navigation">
                    <button class="btn" style="background: linear-gradient(135deg, #00b894, #00a085); font-size: 1.3em; padding: 20px 40px;">
                        ğŸš€ ×‘×•××• × ×™×¦×•×¨ ×¤×¨×¡×•××ª ×× ×¦×—×ª!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== CLOUD SIDEBAR BUTTON ===== -->
    <div class="cloud-sidebar-btn" onclick="openCloudPanel()">
        <div class="csb-icon">â˜ï¸</div>
        <div class="csb-label">×”×¢×œ××” ×œ×¢× ×Ÿ</div>
        <div class="csb-badge">UPLOAD</div>
    </div>

    <!-- Overlay -->
    <div class="cloud-panel-overlay" id="cloudOverlay" onclick="closeCloudPanel()"></div>

    <!-- Cloud Panel -->
    <div class="cloud-panel" id="cloudPanel">
        <div class="cloud-panel-header">
            <h2>â˜ï¸ ×”×¢×œ××ª ×ª×•×›×Ÿ ×œ×¢× ×Ÿ</h2>
            <button class="cloud-panel-close" onclick="closeCloudPanel()">âœ•</button>
        </div>
        <div class="cloud-panel-body">

            <!-- School -->
            <div class="cloud-section">
                <div class="cloud-section-title">ğŸ« ×‘×—×¨×™ ×‘×™×ª ×¡×¤×¨</div>
                <select class="cloud-select" id="cloudSchoolSelect" onchange="loadCloudGroups()">
                    <option value="">×˜×•×¢×Ÿ ×‘×ª×™ ×¡×¤×¨...</option>
                </select>
            </div>

            <!-- Group -->
            <div class="cloud-section">
                <div class="cloud-section-title">ğŸ‘¥ ×‘×—×¨×™ ×§×‘×•×¦×”</div>
                <select class="cloud-select" id="cloudGroupSelect" onchange="loadCloudStudents()" disabled>
                    <option value="">×‘×—×¨×™ ×§×‘×•×¦×”...</option>
                </select>
            </div>

            <!-- Students -->
            <div class="cloud-section">
                <div class="cloud-section-title">ğŸ“ ×ª×œ××™×“×•×ª ×”×§×‘×•×¦×”</div>
                <div class="students-list" id="cloudStudentsList">
                    <span style="color:#bbb; font-size:13px;">×‘×—×¨×™ ×‘×™×ª ×¡×¤×¨ ×•×§×‘×•×¦×”</span>
                </div>
            </div>

            <!-- Upload -->
            <div class="cloud-section">
                <div class="cloud-section-title">ğŸ“ ×”×¢×œ××ª ×§×•×‘×¥</div>
                <div class="upload-area" id="cloudUploadArea"
                     onclick="document.getElementById('cloudFileInput').click()"
                     ondragover="event.preventDefault(); this.classList.add('dragover')"
                     ondragleave="this.classList.remove('dragover')"
                     ondrop="handleCloudDrop(event)">
                    <div class="upload-icon">ğŸ“</div>
                    <div class="upload-area-title">×’×¨×•×¨ ×§×‘×¦×™× ×œ×›××Ÿ</div>
                    <div class="upload-area-sub">××• ×œ×—×¦×™ ×œ×‘×—×™×¨×ª ×§×‘×¦×™×</div>
                    <div class="upload-area-sub" style="margin-top:4px;">×ª××•× ×•×ª Â· ×¡×¨×˜×•× ×™× Â· PDF Â· PPT Â· × ×™×ª×Ÿ ×œ×‘×—×•×¨ ××¡×¤×¨ ×§×‘×¦×™×</div>
                </div>
                <input type="file" id="cloudFileInput" style="display:none" multiple
                       onchange="handleCloudFileSelect(event)"
                       accept="image/*,video/*,audio/*,.pdf,.ppt,.pptx,.doc,.docx">
                <div class="file-queue" id="cloudFileQueue"></div>
                <div class="upload-progress" id="cloudUploadProgress" style="display:none;">
                    <div class="upload-progress-bar">
                        <div class="upload-progress-fill" id="cloudProgressFill"></div>
                    </div>
                    <div class="upload-status" id="cloudUploadStatus">××¢×œ×”...</div>
                </div>
            </div>

            <!-- QR Code -->
            <div class="cloud-section qr-section" id="cloudQRSection">
                <div class="cloud-section-title">ğŸ“± ×§×•×“ QR ×œ×’×œ×¨×™×”</div>
                <div class="qr-box">
                    <img class="qr-code-img" id="cloudQRImage" src="" alt="QR Code">
                    <div class="qr-label">×¡×¨×§×• ×¢× ×”×˜××‘×œ×˜ ×œ×¦×¤×™×™×” ×‘×’×œ×¨×™×™×ª ×”×§×‘×¦×™×</div>
                    <div class="qr-url" id="cloudFileUrl"></div>
                    <button class="btn-cloud" onclick="copyCloudUrl()">ğŸ“‹ ×”×¢×ª×§ ×§×™×©×•×¨ ×œ×’×œ×¨×™×”</button>
                    <button class="btn-cloud btn-cloud-secondary" onclick="resetCloudUpload()">ğŸ”„ ×”×¢×œ××” ×—×“×©×”</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        let currentStep = 1;
        const maxSteps = 6;
        let selectedColor = '';
        let selectedAdTypes = [];
        let selectedTools = [];

        function updateProgress() {
            const progress = (currentStep / maxSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function nextStep() {
            if (currentStep < maxSteps) {
                document.getElementById(`step${currentStep}`).classList.remove('active');
                currentStep++;
                
                if (currentStep === 5) {
                    generateSummary();
                }
                
                document.getElementById(`step${currentStep}`).classList.add('active');
                updateProgress();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                document.getElementById(`step${currentStep}`).classList.remove('active');
                currentStep--;
                document.getElementById(`step${currentStep}`).classList.add('active');
                updateProgress();
            }
        }

        function selectColor(element) {
            document.querySelectorAll('.color-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            selectedColor = element.getAttribute('data-color');
        }

        function selectMultipleAdType(element) {
            element.classList.toggle('selected');
            const adType = element.getAttribute('data-type');
            
            if (selectedAdTypes.includes(adType)) {
                selectedAdTypes = selectedAdTypes.filter(type => type !== adType);
            } else {
                selectedAdTypes.push(adType);
            }
        }

        function selectMultipleTool(element) {
            element.classList.toggle('selected');
            const tool = element.getAttribute('data-tool');
            
            if (selectedTools.includes(tool)) {
                selectedTools = selectedTools.filter(t => t !== tool);
            } else {
                selectedTools.push(tool);
            }
        }

        // ×¢×“×›×•×Ÿ ×”××©×¤×˜ ×‘×–××Ÿ ×××ª
        document.addEventListener('DOMContentLoaded', function() {
            const customer1 = document.getElementById('customer1');
            const customer2 = document.getElementById('customer2');
            const customerSentence = document.getElementById('customerSentence');

            function updateSentence() {
                const text1 = customer1.value || '[××™?]';
                const text2 = customer2.value || '[××™×–×• ×‘×¢×™×”?]';
                customerSentence.textContent = `×”×œ×§×•×— ×©×œ× ×• ×”×•× ${text1} ×©××ª××•×“×“ ×¢× ${text2}`;
            }

            customer1.addEventListener('input', updateSentence);
            customer2.addEventListener('input', updateSentence);
            updateSentence();
        });

        function generateSummary() {
            const customerType = document.getElementById('customerType').value;
            const customerProblem = document.getElementById('customerProblem').value;
            const customer1 = document.getElementById('customer1').value;
            const customer2 = document.getElementById('customer2').value;
            const solution = document.getElementById('solution').value;
            const productName = document.getElementById('productName').value;
            const slogan = document.getElementById('slogan').value;
            const mainMessage = document.getElementById('mainMessage').value;
            const visualDescription = document.getElementById('visualDescription').value;

            const summaryContent = document.getElementById('summaryContent');
            summaryContent.innerHTML = `
                <h3 style="color: #7B1E7A; margin-bottom: 20px;">ğŸ“‹ ×”×ª×•×›× ×™×ª ×”×©×™×•×•×§×™×ª ×©×œ×›× ××•×›× ×”!</h3>
                
                <div class="summary-item">
                    <strong>ğŸ‘¥ ×”×œ×§×•×— ×©×œ×›×:</strong> ${customerType || '×œ× ×¦×•×™×Ÿ'}
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ˜£ ×”×‘×¢×™×” ×©×œ×”×:</strong> ${customerProblem || '×œ× ×¦×•×™×Ÿ'}
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ’¡ ×”××©×¤×˜ ×©×œ×›×:</strong> 
                    <br>"×”×œ×§×•×— ×©×œ× ×• ×”×•× ${customer1 || '[××™?]'} ×©××ª××•×“×“ ×¢× ${customer2 || '[××™×–×• ×‘×¢×™×”?]'}"
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ”§ ×”×¤×ª×¨×•×Ÿ ×©×œ×›×:</strong> ${solution || '×œ× ×¦×•×™×Ÿ'}
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ·ï¸ ×©× ×”××•×¦×¨:</strong> ${productName || '×œ× ×¦×•×™×Ÿ'}
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ“¢ ×”×¡×™×¡××”:</strong> "${slogan || '×œ× ×¦×•×™×Ÿ'}"
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ¨ ×”×¦×‘×¢ ×©×‘×—×¨×ª×:</strong> 
                    <span style="display: inline-block; width: 20px; height: 20px; background-color: ${selectedColor}; border-radius: 50%; margin-left: 10px;"></span>
                    ${selectedColor || '×œ× × ×‘×—×¨'}
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ“º ×¡×•×’×™ ×”×¤×¨×¡×•××ª:</strong> ${selectedAdTypes.length > 0 ? selectedAdTypes.join(', ') : '×œ× × ×‘×—×¨×•'}
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ› ï¸ ×”×›×œ×™× ×©×ª×©×ª××©×•:</strong> ${selectedTools.length > 0 ? selectedTools.join(', ') : '×œ× × ×‘×—×¨×•'}
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ¯ ×”××¡×¨ ×”××¨×›×–×™:</strong> ${mainMessage || '×œ× ×¦×•×™×Ÿ'}
                </div>
                
                <div class="summary-item">
                    <strong>ğŸ‘ï¸ ××™×š ×–×” ×™×™×¨××”:</strong> ${visualDescription || '×œ× ×¦×•×™×Ÿ'}
                </div>
            `;
        }

        function downloadAndPrintSummary() {
            const summaryData = {
                customerType: document.getElementById('customerType').value,
                customerProblem: document.getElementById('customerProblem').value,
                customer1: document.getElementById('customer1').value,
                customer2: document.getElementById('customer2').value,
                solution: document.getElementById('solution').value,
                productName: document.getElementById('productName').value,
                slogan: document.getElementById('slogan').value,
                selectedColor: selectedColor,
                selectedAdTypes: selectedAdTypes,
                selectedTools: selectedTools,
                mainMessage: document.getElementById('mainMessage').value,
                visualDescription: document.getElementById('visualDescription').value
            };

            const summaryText = `
××¡×˜×¨×˜×’×™×” ×©×™×•×•×§×™×ª - × ×©×™× ××•×‘×™×œ×•×ª ××“×¢
=======================================

ğŸ‘¥ ×”×œ×§×•×— ×©×œ×›×: ${summaryData.customerType || '×œ× ×¦×•×™×Ÿ'}

ğŸ˜£ ×”×‘×¢×™×” ×©×œ×”×: ${summaryData.customerProblem || '×œ× ×¦×•×™×Ÿ'}

ğŸ’¡ ×”××©×¤×˜ ×©×œ×›×: 
"×”×œ×§×•×— ×©×œ× ×• ×”×•× ${summaryData.customer1 || '[××™?]'} ×©××ª××•×“×“ ×¢× ${summaryData.customer2 || '[××™×–×• ×‘×¢×™×”?]'}"

ğŸ”§ ×”×¤×ª×¨×•×Ÿ ×©×œ×›×: ${summaryData.solution || '×œ× ×¦×•×™×Ÿ'}

ğŸ·ï¸ ×©× ×”××•×¦×¨: ${summaryData.productName || '×œ× ×¦×•×™×Ÿ'}

ğŸ“¢ ×”×¡×™×¡××”: "${summaryData.slogan || '×œ× ×¦×•×™×Ÿ'}"

ğŸ¨ ×”×¦×‘×¢ ×©×‘×—×¨×ª×: ${summaryData.selectedColor || '×œ× × ×‘×—×¨'}

ğŸ“º ×¡×•×’×™ ×”×¤×¨×¡×•××ª: ${summaryData.selectedAdTypes.length > 0 ? summaryData.selectedAdTypes.join(', ') : '×œ× × ×‘×—×¨×•'}

ğŸ› ï¸ ×”×›×œ×™× ×©×ª×©×ª××©×•: ${summaryData.selectedTools.length > 0 ? summaryData.selectedTools.join(', ') : '×œ× × ×‘×—Ø±×•'}

ğŸ¯ ×”××¡×¨ ×”××¨×›×–×™: ${summaryData.mainMessage || '×œ× ×¦×•×™×Ÿ'}

ğŸ‘ï¸ ××™×š ×–×” ×™×™×¨××”: ${summaryData.visualDescription || '×œ× ×¦×•×™×Ÿ'}

---
× ×•×¦×¨ ×‘×××¦×¢×•×ª WIZARD ×©×™×•×•×§ ××•×¦×¨
× ×©×™× ××•×‘×™×œ×•×ª ××“×¢
            `;

            const blob = new Blob([summaryText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '××¡×˜×¨×˜×’×™×”_×©×™×•×•×§×™×ª.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('×”×§×•×‘×¥ × ×©××¨! ×›×¢×ª ×§×¨××• ×œ××“×¨×™×š/×” ×©×™×“×¤×™×¡ ×œ×›× ××ª ×”×¡×™×›×•× ğŸ“‹');
            
        }

        // ××ª×—×•×œ
        updateProgress();
    </script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
        import { getDatabase, ref, get, push, set } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";
        import { getStorage, ref as storageRef, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCQdei2zVCXkYh99pLPzr_ZMyi8ohupVhY",
            authDomain: "forever-4a04b.firebaseapp.com",
            databaseURL: "https://forever-4a04b-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "forever-4a04b",
            storageBucket: "forever-4a04b.firebasestorage.app",
            messagingSenderId: "250928700713",
            appId: "1:250928700713:web:25d6979fca637b90d42b38"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const storage = getStorage(app);

        let teamsData = {};
        let uploadQueue = [];

        // ===== Panel Open/Close =====
        window.openCloudPanel = function() {
            document.getElementById('cloudPanel').classList.add('open');
            document.getElementById('cloudOverlay').classList.add('open');
        };
        window.closeCloudPanel = function() {
            document.getElementById('cloudPanel').classList.remove('open');
            document.getElementById('cloudOverlay').classList.remove('open');
        };

        // ===== Load Teams from Firebase =====
        async function loadTeamsData() {
            const schoolSelect = document.getElementById('cloudSchoolSelect');
            try {
                const snapshot = await get(ref(database, 'teams'));
                if (snapshot.exists()) {
                    teamsData = snapshot.val();
                    schoolSelect.innerHTML = '<option value="">×‘×—×¨×™ ×‘×™×ª ×¡×¤×¨...</option>';
                    Object.keys(teamsData).forEach(key => {
                        const opt = document.createElement('option');
                        opt.value = key;
                        opt.textContent = key.replace(/_/g, ' ').trim();
                        schoolSelect.appendChild(opt);
                    });
                } else {
                    schoolSelect.innerHTML = '<option value="">×œ× × ××¦××• × ×ª×•× ×™×</option>';
                }
            } catch (err) {
                schoolSelect.innerHTML = '<option value="">×©×’×™××” ×‘×˜×¢×™× ×”</option>';
                console.error(err);
            }
        }

        window.loadCloudGroups = function() {
            const schoolKey = document.getElementById('cloudSchoolSelect').value;
            const groupSelect = document.getElementById('cloudGroupSelect');
            document.getElementById('cloudStudentsList').innerHTML =
                '<span style="color:#bbb;font-size:13px;">×‘×—×¨×™ ×§×‘×•×¦×”</span>';

            if (!schoolKey) {
                groupSelect.innerHTML = '<option value="">×‘×—×¨×™ ×§×‘×•×¦×”...</option>';
                groupSelect.disabled = true;
                return;
            }

            const schoolData = teamsData[schoolKey] || {};
            groupSelect.innerHTML = '<option value="">×‘×—×¨×™ ×§×‘×•×¦×”...</option>';
            Object.keys(schoolData).forEach(gKey => {
                const opt = document.createElement('option');
                opt.value = gKey;
                opt.textContent = gKey.replace(/_/g, ' ');
                groupSelect.appendChild(opt);
            });
            groupSelect.disabled = false;
        };

        window.loadCloudStudents = function() {
            const schoolKey = document.getElementById('cloudSchoolSelect').value;
            const groupKey = document.getElementById('cloudGroupSelect').value;
            const list = document.getElementById('cloudStudentsList');

            if (!schoolKey || !groupKey) {
                list.innerHTML = '<span style="color:#bbb;font-size:13px;">×‘×—×¨×™ ×§×‘×•×¦×”</span>';
                return;
            }

            const groupData = teamsData[schoolKey]?.[groupKey];
            if (groupData?.students?.length) {
                list.innerHTML = groupData.students
                    .filter(s => s?.trim())
                    .map(s => {
                        const firstName = s.trim().split(' ')[0];
                        return `<span class="student-tag">${firstName}</span>`;
                    })
                    .join('');
            } else {
                list.innerHTML = '<span style="color:#bbb;font-size:13px;">×œ× × ××¦××• ×ª×œ××™×“×•×ª</span>';
            }
        };

        // ===== Multi-File Upload =====
        window.handleCloudDrop = function(event) {
            event.preventDefault();
            document.getElementById('cloudUploadArea').classList.remove('dragover');
            const files = [...event.dataTransfer.files];
            if (files.length) processFiles(files);
        };

        window.handleCloudFileSelect = function(event) {
            const files = [...event.target.files];
            if (files.length) processFiles(files);
        };

        function getFileIcon(mimeType) {
            if (mimeType.startsWith('image/')) return 'ğŸ–¼ï¸';
            if (mimeType.startsWith('video/')) return 'ğŸ¬';
            if (mimeType.startsWith('audio/')) return 'ğŸµ';
            if (mimeType.includes('pdf')) return 'ğŸ“„';
            if (mimeType.includes('presentation') || mimeType.includes('powerpoint')) return 'ğŸ“Š';
            return 'ğŸ“';
        }

        function processFiles(files) {
            uploadQueue = files.map(f => ({ file: f, status: 'pending', url: null }));
            renderFileQueue();
            startUploads();
        }

        function renderFileQueue() {
            const queueEl = document.getElementById('cloudFileQueue');
            queueEl.style.display = 'block';
            queueEl.innerHTML = uploadQueue.map((item, i) => `
                <div class="file-item" id="fitem-${i}">
                    <span class="file-item-icon">${getFileIcon(item.file.type)}</span>
                    <div style="flex:1;overflow:hidden;">
                        <div class="file-item-name">${item.file.name}</div>
                        <div class="file-item-bar"><div class="file-item-bar-fill" id="fbar-${i}"></div></div>
                    </div>
                    <span class="file-item-status" id="fstatus-${i}">â³</span>
                </div>
            `).join('');
            document.getElementById('cloudQRSection').classList.remove('visible');
        }

        async function startUploads() {
            const schoolKey = document.getElementById('cloudSchoolSelect').value;
            const groupKey  = document.getElementById('cloudGroupSelect').value;
            const sessionFolder = Date.now();
            await Promise.all(uploadQueue.map((item, i) =>
                uploadSingleFile(item, i, schoolKey, groupKey, sessionFolder)
            ));
            onAllUploaded(schoolKey, groupKey);
        }

        function uploadSingleFile(item, index, schoolKey, groupKey, sessionFolder) {
            return new Promise(resolve => {
                const basePath = schoolKey && groupKey
                    ? `uploads/${schoolKey}/${groupKey}/${sessionFolder}`
                    : `uploads/general/${sessionFolder}`;
                const fileRef = storageRef(storage, `${basePath}/${item.file.name}`);
                const task = uploadBytesResumable(fileRef, item.file);

                task.on('state_changed',
                    snap => {
                        const pct = Math.round((snap.bytesTransferred / snap.totalBytes) * 100);
                        const bar = document.getElementById(`fbar-${index}`);
                        if (bar) bar.style.width = pct + '%';
                    },
                    () => {
                        item.status = 'error';
                        const el = document.getElementById(`fstatus-${index}`);
                        if (el) el.textContent = 'âŒ';
                        resolve();
                    },
                    async () => {
                        item.url = await getDownloadURL(task.snapshot.ref);
                        item.status = 'done';
                        const el = document.getElementById(`fstatus-${index}`);
                        if (el) el.textContent = 'âœ…';
                        const bar = document.getElementById(`fbar-${index}`);
                        if (bar) bar.style.width = '100%';
                        resolve();
                    }
                );
            });
        }

        async function onAllUploaded(schoolKey, groupKey) {
            const done = uploadQueue.filter(f => f.status === 'done');
            if (!done.length) return;

            const sessionRef = push(ref(database, 'sessions'));
            await set(sessionRef, {
                school: schoolKey || '×›×œ×œ×™',
                group: groupKey || '×›×œ×œ×™',
                timestamp: Date.now(),
                files: done.map(f => ({ name: f.file.name, url: f.url, type: f.file.type }))
            });

            const viewerUrl = `https://snirsnir.github.io/foreveryoungday/viewer.html?session=${sessionRef.key}`;
            showQRCode(viewerUrl);
        }

        function showQRCode(url) {
            document.getElementById('cloudQRImage').src =
                `https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(url)}&size=200x200&color=7B1E7A`;
            document.getElementById('cloudFileUrl').textContent = url;
            const qrSection = document.getElementById('cloudQRSection');
            qrSection.classList.add('visible');
            setTimeout(() => qrSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' }), 200);
        }

        window.copyCloudUrl = function() {
            const url = document.getElementById('cloudFileUrl').textContent;
            navigator.clipboard.writeText(url).then(() => alert('âœ… ×”×§×™×©×•×¨ ×”×•×¢×ª×§!'));
        };

        window.resetCloudUpload = function() {
            document.getElementById('cloudFileInput').value = '';
            const queueEl = document.getElementById('cloudFileQueue');
            queueEl.style.display = 'none';
            queueEl.innerHTML = '';
            document.getElementById('cloudQRSection').classList.remove('visible');
            uploadQueue = [];
        };

        // Init
        loadTeamsData();
    </script>
</body>
</html>
